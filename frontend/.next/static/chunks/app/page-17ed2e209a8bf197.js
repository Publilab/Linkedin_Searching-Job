(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{7402:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>j});var t=a(5155),l=a(2115);let n=a(5704).env.NEXT_PUBLIC_API_BASE||"http://localhost:8000/api",r="linkedin_cv_session_id",i={es:{title:"Buscador LinkedIn desde CV",subtitle:"Sube CV, revisa an\xe1lisis IA y prioriza ofertas por mejor encaje.",upload:"Subir CV",summary:"Resumen del CV",analysis:"An\xe1lisis IA del perfil",strategy:"Estrategia de b\xfasqueda",loadStrategy:"Actualizar estrategia",search:"B\xfasqueda",results:"Resultados",scheduler:"Segundo plano",runSearch:"Buscar ahora",saveSummary:"Confirmar resumen",reanalyze:"Reanalizar IA",recommendedQueries:"Consultas recomendadas",activeQueries:"Consultas activas (se aplican en la b\xfasqueda)",addQuery:"Agregar consulta",queryPlaceholder:"Escribe una consulta y agr\xe9gala",enabledQueries:"Consultas habilitadas",remove:"Quitar",selectAll:"Seleccionar todos",deselectAll:"Deseleccionar todos",deleteSelected:"Borrar seleccionadas",addToSearch:"Agregar",page:"P\xe1gina",of:"de",total:"Total",pageSize:"Tama\xf1o de p\xe1gina",prev:"Anterior",next:"Siguiente",sessionHistory:"Sesiones previas",fileName:"Archivo",analysisAt:"An\xe1lisis ejecutado",createdAt:"Sesi\xf3n creada",status:"Estado",resume:"Retomar"},en:{title:"LinkedIn Job Finder from CV",subtitle:"Upload CV, review AI analysis, and prioritize jobs by best fit.",upload:"Upload CV",summary:"CV Summary",analysis:"AI Profile Analysis",strategy:"Search strategy",loadStrategy:"Refresh strategy",search:"Search",results:"Results",scheduler:"Background",runSearch:"Search now",saveSummary:"Confirm summary",reanalyze:"Reanalyze AI",recommendedQueries:"Recommended queries",activeQueries:"Active queries (used in search)",addQuery:"Add query",queryPlaceholder:"Type a query and add it",enabledQueries:"Enabled queries",remove:"Remove",selectAll:"Select all",deselectAll:"Deselect all",deleteSelected:"Delete selected",addToSearch:"Add",page:"Page",of:"of",total:"Total",pageSize:"Page size",prev:"Prev",next:"Next",sessionHistory:"Session history",fileName:"File",analysisAt:"Analysis run",createdAt:"Session created",status:"Status",resume:"Resume"}};async function o(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=await fetch("".concat(n).concat(e),{cache:"no-store",...s});if(!a.ok){let e="HTTP ".concat(a.status);try{e=(await a.json()).detail||e}catch(e){}throw Error(e)}return a.json()}function c(e){return(e||[]).join(", ")}function d(e){return(e||[]).join("\n")}function u(e){return String(e||"").split(/\n|;/).map(e=>e.trim()).filter(Boolean)}function h(e){return String(e||"").replace(/\s+/g," ").trim()}function m(){return"undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID?crypto.randomUUID():"q_".concat(Date.now().toString(36),"_").concat(Math.random().toString(36).slice(2,9))}function g(e,s){var a;let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=null==(a=t.enabled)||a,n=t.source||"manual",r=new Map;for(let s of e||[]){let e=h((null==s?void 0:s.text)||s);e&&r.set(e.toLowerCase(),{id:(null==s?void 0:s.id)||m(),text:e,enabled:(null==s?void 0:s.enabled)!==!1,source:(null==s?void 0:s.source)||n})}for(let e of s||[]){let s=h((null==e?void 0:e.text)||e);if(!s)continue;let a=s.toLowerCase();r.has(a)||r.set(a,{id:(null==e?void 0:e.id)||m(),text:s,enabled:l,source:n})}return Array.from(r.values())}function p(e,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t=a.source||"analysis",l=new Map;for(let s of e||[]){let e=h((null==s?void 0:s.text)||s);e&&l.set(e.toLowerCase(),{id:(null==s?void 0:s.id)||m(),text:e,source:(null==s?void 0:s.source)||t})}for(let e of s||[]){let s=h((null==e?void 0:e.text)||e);if(!s)continue;let a=s.toLowerCase();l.has(a)||l.set(a,{id:(null==e?void 0:e.id)||m(),text:s,source:t})}return Array.from(l.values())}function x(e){var s=(e||[]).filter(e=>(null==e?void 0:e.enabled)!==!1).map(e=>(null==e?void 0:e.text)||"");let a=new Set,t=[];for(let e of s||[]){let s=String(e||"").trim();if(!s)continue;let l=s.toLowerCase();a.has(l)||(a.add(l),t.push(s))}return t}function y(e){if(!e)return"-";let s=new Date(e);return Number.isNaN(s.getTime())?String(e):s.toLocaleString()}function j(){let[e,s]=(0,l.useState)("es"),a=i[e],[n,m]=(0,l.useState)(!1),[j,v]=(0,l.useState)(""),[_,b]=(0,l.useState)(null),[f,N]=(0,l.useState)(""),[S,w]=(0,l.useState)(""),[C,k]=(0,l.useState)([]),[A,T]=(0,l.useState)(!1),[E,q]=(0,l.useState)({highlights:[],skills:[],experience:[],education:[],languages:[]}),[I,P]=(0,l.useState)({target_roles:[],secondary_roles:[],seniority:"unknown",industries:[],strengths:[],skill_gaps:[],recommended_queries:[],llm_status:"fallback",llm_error:null}),[O,z]=(0,l.useState)({role_focus:[],recommended_queries:[],market_roles:[]}),[L,R]=(0,l.useState)(""),[D,Q]=(0,l.useState)(""),[U,V]=(0,l.useState)(""),[M,B]=(0,l.useState)("24"),[F,H]=(0,l.useState)([]),[J,Y]=(0,l.useState)([]),[K,W]=(0,l.useState)(""),[X,G]=(0,l.useState)("newest"),[Z,$]=(0,l.useState)(""),[ee,es]=(0,l.useState)(""),[ea,et]=(0,l.useState)(""),[el,en]=(0,l.useState)(""),[er,ei]=(0,l.useState)([]),[eo,ec]=(0,l.useState)({total:0,page:1,page_size:50,total_pages:0,has_prev:!1,has_next:!1}),[ed,eu]=(0,l.useState)(1),[eh,em]=(0,l.useState)("50"),[eg,ep]=(0,l.useState)({categories:{},subcategories:{},modalities:{},locations:{},posted_buckets:{}}),[ex,ey]=(0,l.useState)({is_running:!1,interval_minutes:30,last_tick_at:null}),ej=(0,l.useMemo)(()=>({highlights:d(E.highlights),skills:d(E.skills),experience:d(E.experience),education:d(E.education),languages:d(E.languages)}),[E]),ev=async e=>{v(""),m(!0);try{await e()}catch(e){v(e.message||"Operation failed")}finally{m(!1)}},e_=async()=>{ey(await o("/scheduler/status"))},eb=async()=>{k((await o("/session/history?limit=50")).items||[])},ef=async e=>{if(e){if(w(e.session_id||""),N(e.cv_id||""),R(e.active_search_id||""),eC(e.ui_state||{}),e.cv_id){let s=await o("/cv/".concat(e.cv_id,"/summary"));q(s.summary||E),P(s.analysis||I),Y(e=>{var a;return p(e,(null==(a=s.analysis)?void 0:a.recommended_queries)||[],{source:"analysis"})}),await eN(e.cv_id)}e.active_search_id?(await eS(e.active_search_id),await ew(e.active_search_id)):(ei([]),ep({categories:{},subcategories:{},modalities:{},locations:{},posted_buckets:{}}))}},eN=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;if(!e)return;let s=await o("/cv/".concat(e,"/strategy"));z(s),Y(e=>p(e,s.recommended_queries||[],{source:"strategy"}))},eS=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L;if(!e)return;let s=await o((e=>{let s=new URLSearchParams;return s.set("sort_by",X),Z&&s.set("category",Z),ee&&s.set("subcategory",ee),ea&&s.set("max_posted_hours",ea),el&&s.set("location_contains",el),s.set("page",String(ed)),s.set("page_size",String(Number(eh)||50)),"/searches/".concat(e,"/results?").concat(s.toString())})(e));ei(s.items||[]),ec({total:s.total||0,page:s.page||1,page_size:s.page_size||Number(eh)||50,total_pages:s.total_pages||0,has_prev:!!s.has_prev,has_next:!!s.has_next})},ew=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L;e&&ep(await o("/searches/".concat(e,"/facets")))},eC=e=>{e&&"object"==typeof e&&("string"==typeof e.country&&Q(e.country),"string"==typeof e.city&&V(e.city),null!=e.time_window_hours&&B(String(e.time_window_hours)),"string"==typeof e.sort_by&&G(e.sort_by),"string"==typeof e.category&&$(e.category),"string"==typeof e.subcategory&&es(e.subcategory),"string"==typeof e.max_posted_hours&&et(e.max_posted_hours),"string"==typeof e.location_contains&&en(e.location_contains),null!=e.page&&eu(Math.max(1,Number(e.page)||1)),null!=e.page_size&&em(String(Number(e.page_size)||50)),"string"==typeof e.lang&&("es"===e.lang||"en"===e.lang)&&s(e.lang),Array.isArray(e.query_items)&&H(g([],e.query_items,{enabled:!0,source:"session"})),Array.isArray(e.suggested_queries)&&Y(p([],e.suggested_queries,{source:"session"})),"string"==typeof e.search_id&&R(e.search_id))};(0,l.useEffect)(()=>{e_().catch(()=>null),eb().catch(()=>null)},[]),(0,l.useEffect)(()=>{let e=!1;return(async()=>{let s="";try{s=localStorage.getItem(r)||""}catch(e){s=""}if(s){T(!0);try{let a=await o("/session/current?session_id=".concat(encodeURIComponent(s))),t=null==a?void 0:a.session;if(!t)return void localStorage.removeItem(r);if(e)return;await ef(t)}catch(e){}finally{e||T(!1)}}})(),()=>{e=!0}},[]),(0,l.useEffect)(()=>{if(S)try{localStorage.setItem(r,S)}catch(e){}},[S]),(0,l.useEffect)(()=>{if(!S||A)return;let s={session_id:S,active_search_id:L||null,ui_state:{cv_id:f||null,search_id:L||null,country:D,city:U,time_window_hours:Number(M)||24,query_items:F,suggested_queries:J,sort_by:X,category:Z,subcategory:ee,max_posted_hours:ea,location_contains:el,page:ed,page_size:Number(eh)||50,lang:e}},a=setTimeout(()=>{o("/session/state",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).catch(()=>null)},400);return()=>clearTimeout(a)},[S,A,f,L,D,U,M,F,J,X,Z,ee,ea,el,ed,eh,e]),(0,l.useEffect)(()=>{L&&eS(L).catch(()=>null)},[L,X,Z,ee,ea,el,ed,eh]),(0,l.useEffect)(()=>{if(!L)return;let e=setInterval(()=>{eS(L).catch(()=>null),e_().catch(()=>null),ew(L).catch(()=>null)},3e4);return()=>clearInterval(e)},[L,X,Z,ee,ea,el,ed,eh]),(0,l.useEffect)(()=>{eo.total_pages>0&&ed>eo.total_pages&&eu(eo.total_pages)},[eo.total_pages,ed]);let ek=e=>ev(async()=>{if(!L)throw Error("Create search first");0!==er.length&&(await Promise.all(er.map(s=>o("/searches/results/".concat(s.result_id,"/check"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({checked:e})}))),await eS(L))}),eA=()=>{let e=h(K);e&&(H(s=>g(s,[e],{enabled:!0,source:"manual"})),W(""))},eT=e=>{0!==F.length&&H(s=>s.map(s=>({...s,enabled:e})))},eE=x(F).length,eq=Object.keys(eg.categories||{}).sort(),eI=Object.keys(eg.subcategories||{}).sort();return(0,t.jsxs)("main",{children:[(0,t.jsxs)("div",{className:"card",style:{marginBottom:14},children:[(0,t.jsxs)("div",{className:"row",style:{alignItems:"center"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{children:a.title}),(0,t.jsx)("p",{className:"small",children:a.subtitle})]}),(0,t.jsx)("div",{style:{justifySelf:"end"},children:(0,t.jsx)("button",{className:"secondary",onClick:()=>s("es"===e?"en":"es"),children:"ES / EN"})})]}),j?(0,t.jsx)("div",{className:"alert",children:j}):null]}),(0,t.jsxs)("div",{className:"grid two",children:[(0,t.jsxs)("section",{className:"card",children:[(0,t.jsx)("h2",{children:a.upload}),(0,t.jsxs)("label",{children:["CV (.pdf / .docx)",(0,t.jsx)("input",{type:"file",accept:".pdf,.docx",onChange:e=>{var s;return b((null==(s=e.target.files)?void 0:s[0])||null)}})]}),(0,t.jsxs)("div",{className:"toolbar",children:[(0,t.jsx)("button",{onClick:()=>ev(async()=>{var e;if(!_)throw Error("Select a CV file");let s=new FormData;s.append("file",_);let a=await o("/cv/upload",{method:"POST",body:s});w(a.session_id||""),N(a.cv_id),q(a.summary),P(a.analysis||I),R(""),H([]),Y(p([],(null==(e=a.analysis)?void 0:e.recommended_queries)||[],{source:"analysis"})),await eN(a.cv_id),await eb()}),disabled:n||!_,children:"Upload"}),(0,t.jsxs)("span",{className:"small",children:["CV ID: ",f||"-"]}),(0,t.jsxs)("span",{className:"small",children:["Session ID: ",S||"-"]})]})]}),(0,t.jsxs)("section",{className:"card",children:[(0,t.jsx)("h2",{children:a.scheduler}),(0,t.jsxs)("p",{className:"small",children:["Running: ",(0,t.jsx)("strong",{children:ex.is_running?"Yes":"No"})," | Interval: ",ex.interval_minutes," min"]}),(0,t.jsxs)("p",{className:"small",children:["Last tick: ",ex.last_tick_at||"-"]}),(0,t.jsxs)("div",{className:"toolbar",children:[(0,t.jsx)("button",{onClick:()=>ev(async()=>{ey(await o("/scheduler/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({interval_minutes:30})}))}),disabled:n,children:"Start"}),(0,t.jsx)("button",{className:"secondary",onClick:()=>ev(async()=>{ey(await o("/scheduler/stop",{method:"POST"}))}),disabled:n,children:"Stop"})]})]})]}),(0,t.jsxs)("section",{className:"card",style:{marginTop:14},children:[(0,t.jsx)("h2",{children:a.sessionHistory}),(0,t.jsx)("div",{style:{display:"grid",gap:8},children:0===C.length?(0,t.jsx)("p",{className:"small",children:"No sessions yet."}):C.map(e=>(0,t.jsxs)("div",{className:"row",style:{gridTemplateColumns:"1.2fr 1fr 1fr auto",gap:8,alignItems:"center"},children:[(0,t.jsxs)("div",{className:"small",children:[(0,t.jsxs)("strong",{children:[a.fileName,":"]})," ",e.cv_filename||"-"]}),(0,t.jsxs)("div",{className:"small",children:[(0,t.jsxs)("strong",{children:[a.analysisAt,":"]})," ",y(e.analysis_executed_at)]}),(0,t.jsxs)("div",{className:"small",children:[(0,t.jsxs)("strong",{children:[a.createdAt,":"]})," ",y(e.created_at),(0,t.jsx)("br",{}),(0,t.jsxs)("strong",{children:[a.status,":"]})," ",e.status||"-"]}),(0,t.jsx)("button",{type:"button",className:"secondary",disabled:n||!e.session_id||e.session_id===S,onClick:()=>{let s;return s=e.session_id,ev(async()=>{if(!s)return;let e=await o("/session/resume",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:s})});await ef(e),await eb()})},children:a.resume})]},e.session_id))})]}),(0,t.jsxs)("section",{className:"card",style:{marginTop:14},children:[(0,t.jsx)("h2",{children:a.analysis}),(0,t.jsxs)("p",{className:"small",children:["LLM status: ",(0,t.jsx)("strong",{children:I.llm_status||"fallback"})]}),I.llm_error?(0,t.jsxs)("p",{className:"small",children:[(0,t.jsx)("strong",{children:"LLM error:"})," ",I.llm_error]}):null,(0,t.jsxs)("div",{className:"grid two",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"small",children:[(0,t.jsx)("strong",{children:"Target roles:"})," ",c(I.target_roles)||"-"]}),(0,t.jsxs)("p",{className:"small",children:[(0,t.jsx)("strong",{children:"Secondary roles:"})," ",c(I.secondary_roles)||"-"]}),(0,t.jsxs)("p",{className:"small",children:[(0,t.jsx)("strong",{children:"Seniority:"})," ",I.seniority||"unknown"]}),(0,t.jsxs)("p",{className:"small",children:[(0,t.jsx)("strong",{children:"Industries:"})," ",c(I.industries)||"-"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"small",children:[(0,t.jsx)("strong",{children:"Strengths:"})," ",c(I.strengths)||"-"]}),(0,t.jsxs)("p",{className:"small",children:[(0,t.jsx)("strong",{children:"Skill gaps:"})," ",c(I.skill_gaps)||"-"]})]})]}),(0,t.jsx)("h3",{style:{marginTop:14},children:a.strategy}),(0,t.jsxs)("p",{className:"small",children:[(0,t.jsx)("strong",{children:"Role focus:"})," ",c(O.role_focus)||"-"]}),(0,t.jsx)("div",{className:"toolbar",children:(O.market_roles||[]).slice(0,6).map(e=>(0,t.jsxs)("span",{className:"badge",children:[e.role," (",e.demand_score,")"]},"".concat(e.role,"-").concat(e.source)))}),(0,t.jsxs)("div",{style:{marginTop:8},children:[(0,t.jsx)("p",{className:"small",children:(0,t.jsxs)("strong",{children:[a.recommendedQueries,":"]})}),(0,t.jsx)("div",{style:{marginTop:8,display:"grid",gap:6},children:0===J.length?(0,t.jsx)("p",{className:"small",children:"No suggestions yet."}):J.map((e,s)=>(0,t.jsxs)("div",{className:"row",style:{gridTemplateColumns:"1fr auto",gap:8},children:[(0,t.jsx)("input",{value:e.text,onChange:e=>((e,s)=>{let a=[...J];a[e]&&(a[e]={...a[e],text:s},Y(a))})(s,e.target.value),placeholder:"AI suggestion"}),(0,t.jsxs)("button",{className:"secondary",type:"button",onClick:()=>(e=>{let s=h(e);s&&H(e=>{let a=s.toLowerCase(),t=[...e],l=t.findIndex(e=>h(e.text).toLowerCase()===a);return l>=0?(t[l]={...t[l],enabled:!0},t):g(t,[s],{enabled:!0,source:"recommended"})})})(e.text),children:["+ ",a.addToSearch]})]},e.id||"".concat(e.text,"-").concat(s)))})]}),(0,t.jsxs)("div",{className:"toolbar",style:{marginTop:10},children:[(0,t.jsx)("button",{className:"ai-reanalyze",onClick:()=>ev(async()=>{if(!f)throw Error("Upload CV first");let e=await o("/cv/".concat(f,"/analyze"),{method:"POST"});q(e.summary),P(e.analysis||I),Y(s=>{var a;return p(s,(null==(a=e.analysis)?void 0:a.recommended_queries)||[],{source:"analysis"})}),await eN(f)}),disabled:n||!f,children:a.reanalyze}),(0,t.jsx)("button",{className:"ai-strategy",onClick:()=>ev(()=>eN(f)),disabled:n||!f,children:a.loadStrategy})]})]}),(0,t.jsxs)("section",{className:"card",style:{marginTop:14},children:[(0,t.jsx)("h2",{children:a.summary}),(0,t.jsx)("p",{className:"small",children:"Edita libremente: una l\xednea por elemento en cada campo."}),(0,t.jsxs)("div",{className:"grid two",children:[(0,t.jsxs)("label",{children:["Highlights",(0,t.jsx)("textarea",{value:ej.highlights,onChange:e=>q(s=>({...s,highlights:u(e.target.value)}))})]}),(0,t.jsxs)("label",{children:["Skills",(0,t.jsx)("textarea",{value:ej.skills,onChange:e=>q(s=>({...s,skills:u(e.target.value)}))})]}),(0,t.jsxs)("label",{children:["Experience",(0,t.jsx)("textarea",{value:ej.experience,onChange:e=>q(s=>({...s,experience:u(e.target.value)}))})]}),(0,t.jsxs)("label",{children:["Education",(0,t.jsx)("textarea",{value:ej.education,onChange:e=>q(s=>({...s,education:u(e.target.value)}))})]})]}),(0,t.jsxs)("label",{children:["Languages",(0,t.jsx)("textarea",{value:ej.languages,onChange:e=>q(s=>({...s,languages:u(e.target.value)}))})]}),(0,t.jsx)("div",{className:"toolbar",children:(0,t.jsx)("button",{onClick:()=>ev(async()=>{if(!f)throw Error("Upload CV first");let e={summary:{highlights:u(ej.highlights),skills:u(ej.skills),experience:u(ej.experience),education:u(ej.education),languages:u(ej.languages)}},s=await o("/cv/".concat(f,"/summary"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});q(s.summary),P(s.analysis||I),Y(e=>{var a;return p(e,(null==(a=s.analysis)?void 0:a.recommended_queries)||[],{source:"analysis"})}),await eN(f)}),disabled:n||!f,children:a.saveSummary})})]}),(0,t.jsxs)("section",{className:"card",style:{marginTop:14},children:[(0,t.jsx)("h2",{children:a.search}),(0,t.jsxs)("div",{className:"row",children:[(0,t.jsxs)("label",{children:["Country",(0,t.jsx)("input",{value:D,onChange:e=>Q(e.target.value),placeholder:"Chile"})]}),(0,t.jsxs)("label",{children:["City",(0,t.jsx)("input",{value:U,onChange:e=>V(e.target.value),placeholder:"Santiago"})]}),(0,t.jsxs)("label",{children:["Hours window",(0,t.jsxs)("select",{value:M,onChange:e=>B(e.target.value),children:[(0,t.jsx)("option",{value:"1",children:"1h"}),(0,t.jsx)("option",{value:"3",children:"3h"}),(0,t.jsx)("option",{value:"8",children:"8h"}),(0,t.jsx)("option",{value:"24",children:"24h"}),(0,t.jsx)("option",{value:"72",children:"72h"}),(0,t.jsx)("option",{value:"168",children:"1w"}),(0,t.jsx)("option",{value:"720",children:"1m"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"small",style:{margin:0,marginBottom:6},children:a.activeQueries}),(0,t.jsxs)("div",{className:"toolbar",style:{marginTop:6},children:[(0,t.jsx)("input",{value:K,onChange:e=>W(e.target.value),placeholder:a.queryPlaceholder,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),eA())}}),(0,t.jsx)("button",{type:"button",className:"secondary",onClick:eA,children:a.addQuery})]}),(0,t.jsxs)("div",{className:"toolbar",style:{marginTop:6},children:[(0,t.jsx)("button",{type:"button",className:"secondary",disabled:0===F.length,onClick:()=>eT(!0),children:a.selectAll}),(0,t.jsx)("button",{type:"button",className:"secondary",disabled:0===F.length,onClick:()=>eT(!1),children:a.deselectAll}),(0,t.jsx)("button",{type:"button",className:"secondary",disabled:F.every(e=>(null==e?void 0:e.enabled)===!1),onClick:()=>{0!==F.length&&H(e=>e.filter(e=>(null==e?void 0:e.enabled)===!1))},children:a.deleteSelected})]}),(0,t.jsx)("div",{style:{marginTop:8,display:"grid",gap:6},children:0===F.length?(0,t.jsx)("p",{className:"small",children:"No queries yet."}):F.map((e,s)=>(0,t.jsxs)("div",{className:"row",style:{gridTemplateColumns:"auto 1fr auto",gap:8},children:[(0,t.jsx)("input",{type:"checkbox",checked:!1!==e.enabled,onChange:e=>((e,s)=>{let a=[...F];a[e]&&(a[e]={...a[e],enabled:s},H(a))})(s,e.target.checked)}),(0,t.jsx)("input",{value:e.text,onChange:e=>((e,s)=>{let a=[...F];a[e]&&(a[e]={...a[e],text:s},H(a))})(s,e.target.value),placeholder:"Query"}),(0,t.jsx)("button",{type:"button",className:"secondary",onClick:()=>(e=>{let s=[...F];s.splice(e,1),H(s)})(s),children:a.remove})]},e.id||"".concat(e.text,"-").concat(s)))}),(0,t.jsxs)("p",{className:"small",children:[a.enabledQueries,": ",eE]})]}),(0,t.jsxs)("div",{className:"toolbar",children:[(0,t.jsx)("button",{onClick:()=>ev(async()=>{var e;if(!f)throw Error("Upload and confirm CV first");let s=x(F);if(0===s.length)throw Error("Add at least one enabled query");let a=await o("/searches",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cv_id:f,country:D||null,city:U||null,time_window_hours:Number(M),keywords:s})});R(a.search_id),ei((null==(e=a.results)?void 0:e.items)||[]),eu(1),await e_(),await ew(a.search_id)}),disabled:n||!f,children:a.runSearch}),(0,t.jsx)("button",{className:"secondary",onClick:()=>ev(async()=>{if(!L)throw Error("Create search first");let e=x(F);if(0===e.length)throw Error("Add at least one enabled query");await o("/searches/".concat(L),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({country:D||null,city:U||null,time_window_hours:Number(M),keywords:e})}),await o("/searches/".concat(L,"/run"),{method:"POST"}),eu(1),await eS(L),await ew(L)}),disabled:n||!L,children:"Run Again"}),(0,t.jsxs)("span",{className:"small",children:["Search ID: ",L||"-"]})]})]}),(0,t.jsxs)("section",{className:"card",style:{marginTop:14},children:[(0,t.jsx)("h2",{children:a.results}),(0,t.jsxs)("div",{className:"row",children:[(0,t.jsxs)("label",{children:["Sort",(0,t.jsxs)("select",{value:X,onChange:e=>{G(e.target.value),eu(1)},children:[(0,t.jsx)("option",{value:"newest",children:"Newest"}),(0,t.jsx)("option",{value:"best_fit",children:"Best Fit"})]})]}),(0,t.jsxs)("label",{children:["Category",(0,t.jsxs)("select",{value:Z,onChange:e=>{$(e.target.value),eu(1)},children:[(0,t.jsx)("option",{value:"",children:"All"}),eq.map(e=>(0,t.jsxs)("option",{value:e,children:[e," (",eg.categories[e],")"]},e))]})]}),(0,t.jsxs)("label",{children:["Subcategory",(0,t.jsxs)("select",{value:ee,onChange:e=>{es(e.target.value),eu(1)},children:[(0,t.jsx)("option",{value:"",children:"All"}),eI.map(e=>(0,t.jsxs)("option",{value:e,children:[e," (",eg.subcategories[e],")"]},e))]})]}),(0,t.jsxs)("label",{children:["Max posted hours",(0,t.jsxs)("select",{value:ea,onChange:e=>{et(e.target.value),eu(1)},children:[(0,t.jsx)("option",{value:"",children:"Any"}),(0,t.jsx)("option",{value:"1",children:"1h"}),(0,t.jsx)("option",{value:"3",children:"3h"}),(0,t.jsx)("option",{value:"8",children:"8h"}),(0,t.jsx)("option",{value:"24",children:"24h"}),(0,t.jsx)("option",{value:"72",children:"72h"}),(0,t.jsx)("option",{value:"168",children:"1w"}),(0,t.jsx)("option",{value:"720",children:"1m"})]})]}),(0,t.jsxs)("label",{children:["Location contains",(0,t.jsx)("input",{value:el,onChange:e=>{en(e.target.value),eu(1)},placeholder:"Santiago"})]}),(0,t.jsxs)("label",{children:[a.pageSize,(0,t.jsxs)("select",{value:eh,onChange:e=>{em(e.target.value),eu(1)},children:[(0,t.jsx)("option",{value:"25",children:"25"}),(0,t.jsx)("option",{value:"50",children:"50"}),(0,t.jsx)("option",{value:"100",children:"100"})]})]})]}),(0,t.jsxs)("div",{className:"toolbar",style:{marginTop:8},children:[(0,t.jsx)("button",{type:"button",className:"secondary",disabled:n||!L||0===er.length,onClick:()=>ek(!0),children:a.selectAll}),(0,t.jsx)("button",{type:"button",className:"secondary",disabled:n||!L||0===er.length,onClick:()=>ek(!1),children:a.deselectAll}),(0,t.jsxs)("span",{className:"small",children:[a.total,": ",eo.total]}),(0,t.jsxs)("span",{className:"small",children:[a.page," ",eo.page," ",a.of," ",eo.total_pages||0]}),(0,t.jsx)("button",{type:"button",className:"secondary",disabled:n||!L||!eo.has_prev,onClick:()=>eu(e=>Math.max(1,e-1)),children:a.prev}),(0,t.jsx)("button",{type:"button",className:"secondary",disabled:n||!L||!eo.has_next,onClick:()=>eu(e=>e+1),children:a.next})]}),(0,t.jsx)("div",{className:"table-wrap",children:(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Check"}),(0,t.jsx)("th",{children:"Title"}),(0,t.jsx)("th",{children:"Category"}),(0,t.jsx)("th",{children:"Subcategory"}),(0,t.jsx)("th",{children:"Description"}),(0,t.jsx)("th",{children:"Mode"}),(0,t.jsx)("th",{children:"Easy Apply"}),(0,t.jsx)("th",{children:"Applicants"}),(0,t.jsx)("th",{children:"% Match"}),(0,t.jsx)("th",{children:"LLM Fit"}),(0,t.jsx)("th",{children:"Final Score"}),(0,t.jsx)("th",{children:"Reasons"}),(0,t.jsx)("th",{children:"Apply"})]})}),(0,t.jsx)("tbody",{children:0===er.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:13,className:"small",children:"No results yet."})}):er.map(e=>{var s,a,l,n,r,i,c,d,u,h,m;return(0,t.jsxs)("tr",{className:e.is_new?"new-row":"",children:[(0,t.jsx)("td",{children:(0,t.jsx)("input",{type:"checkbox",checked:e.checked,onChange:s=>{let a,t;return a=e.result_id,t=s.target.checked,ev(async()=>{await o("/searches/results/".concat(a,"/check"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({checked:t})}),await eS(L)})}})}),(0,t.jsxs)("td",{children:[(0,t.jsx)("strong",{children:e.title}),(0,t.jsxs)("div",{className:"small",children:[e.company||"-"," | ",e.location||"-"]}),(0,t.jsxs)("div",{className:"small",children:["posted: ",null==e.posted_age_hours?"-":"".concat(e.posted_age_hours,"h")]}),e.is_new?(0,t.jsx)("span",{className:"badge",children:"NEW"}):null]}),(0,t.jsx)("td",{children:e.job_category||"-"}),(0,t.jsx)("td",{children:e.job_subcategory||"-"}),(0,t.jsx)("td",{className:"small",children:(null==(s=e.description)?void 0:s.slice(0,220))||"-"}),(0,t.jsx)("td",{children:e.modality||"-"}),(0,t.jsx)("td",{children:e.easy_apply?"Yes":"No"}),(0,t.jsx)("td",{children:null!=(d=e.applicant_count)?d:0}),(0,t.jsx)("td",{children:null!=(u=null==(l=e.match_percent)||null==(a=l.toFixed)?void 0:a.call(l,2))?u:e.match_percent}),(0,t.jsx)("td",{children:null!=(h=null==(r=e.llm_fit_score)||null==(n=r.toFixed)?void 0:n.call(r,2))?h:e.llm_fit_score}),(0,t.jsx)("td",{children:(0,t.jsx)("strong",{children:null!=(m=null==(c=e.final_score)||null==(i=c.toFixed)?void 0:i.call(c,2))?m:e.final_score})}),(0,t.jsx)("td",{className:"small",children:(e.fit_reasons||[]).slice(0,2).join(" | ")||"-"}),(0,t.jsx)("td",{children:(0,t.jsx)("a",{className:"job-link",href:e.job_url,target:"_blank",rel:"noreferrer",children:"Open"})})]},e.result_id)})})]})})]})]})}},8820:(e,s,a)=>{Promise.resolve().then(a.bind(a,7402))}},e=>{e.O(0,[441,255,358],()=>e(e.s=8820)),_N_E=e.O()}]);